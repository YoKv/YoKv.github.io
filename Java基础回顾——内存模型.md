---
title: 内存模型
date: 2017-08-25 16:20:36
categories: 
- Java基础
---

## 内存模型
<!--more-->

[来源](http://gityuan.com/2016/01/09/java-memory/)
作为Java开发人员来说，并不需要像C/C++开发人员，需要时刻注意内存的释放，而是全权交给虚拟机去管理，那么有就必要了解虚拟机的运行时内存是如何构成的。运行时内存模型，分为线程私有和共享数据区两大类，其中线程私有的数据区包含程序计数器、虚拟机栈、本地方法区，所有线程共享的数据区包含Java堆、方法区，在方法区内有一个常量池
[图](http://gityuan.com/images/jvm/jvm_memory_1.png)
[图](http://gityuan.com/images/jvm/stack_heap_info.png)
（1）线程私有区：
* 程序计数器，记录正在执行的虚拟机字节码的地址；
* 虚拟机栈：方法执行的内存区，每个方法执行时会在虚拟机栈中创建栈帧；
* 本地方法栈：虚拟机的Native方法执行的内存区；
（2）线程共享区：
* Java堆：对象分配内存的区域；
* 方法区：存放类信息、常量、静态变量、编译器编译后的代码等数据；
* 常量池：存放编译器生成的各种字面量和符号引用，是方法区的一部分。

## 并发编程
Java内存模型规定和指引Java程序在不同的内存架构、CPU和操作系统间有确定性地行为。它在多线程的情况下尤其重要。Java内存模型对一个线程所做的变动能被其它线程可见提供了保证，它们之间是先行发生关系。这个关系定义了一些规则让程序员在并发编程时思路更清晰。比如，先行发生关系确保了：
线程内的代码能够按先后顺序执行，这被称为程序次序规则。
对于同一个锁，一个解锁操作一定要发生在时间上后发生的另一个锁定操作之前，也叫做管程锁定规则。
前一个对volatile的写操作在后一个volatile的读操作之前，也叫volatile变量规则。
一个线程内的任何操作必需在这个线程的start()调用之后，也叫作线程启动规则。
一个线程的所有操作都会在线程终止之前，线程终止规则。
一个对象的终结操作必需在这个对象构造完成之后，也叫对象终结规则。
可传递性

## 待研究补充
