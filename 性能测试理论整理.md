---
title: 性能测试理论整理
date: 2018-01-11 17:30:27
categories:
- 测试
---

## 性能测试方法的核心

根据不同的测试目的，性能测试可以分为多种类型，常见的有如下几类：

* 基准测试（Standard Testing）
* 负载测试（Load Testing）
* 压力测试（Stress Testing）
* 疲劳强度测试


<!--more-->

* 基准测试
 	> 基准测试指的是模拟单个用户执行业务场景时，考察系统的性能指标。严格意义上来讲，基准测试并不能算作性能测试范畴，它跟功能测试并没有太大区别。差异在于，基准测试的目的更多地是关注业务功能的正确性，或者说验证测试脚本的正确性，然后，将基准测试时采集得到的系统性能指标，作为基准测试结果，为后续并发压力测试的性能分析提供参考依据。

* 负载测试
	> 主要指的是模拟系统在正常负载压力场景下，考察系统的性能指标。这里说的正常负载，主要是指用户对系统能承受的最大业务负载量的期望值，即预计系统最大应该支持多大用户的并发量。通过负载测试，目的是验证系统是否能满足预期的业务压力场景。

* 压力测试
	> 通俗地讲，压力测试是为了发现在多大并发压力下系统的性能会变得不可接受，或者出现性能拐点（崩溃）的情况。在加压策略上，压力测试会对被测系统逐步加压，在加压的过程中考察系统性能指标的走势情况，最终找出系统在出现性能拐点时的并发用户数，也就是系统支持的最大并发用户数。

* 疲劳强度测试
	> 其实疲劳强度测试的加压策略跟负载测试也很接近，都是对系统模拟出系统能承受的最大业务负载量，差异在于，疲劳强度测试更关注系统在长时间运行情况下系统性能指标的变化情况，例如，系统在运行一段时间后，是否会出现事务处理失败、响应时间增长、业务吞吐量降低、CPU/内存资源增长等问题。

## 名词介绍
### PV、TPS、QPS
PV=page view
TPS=transactions per second
QPS=queries per second
RPS=requests per second
RPS=并发数/平均响应时间

#### 峰值QPS:
原理：每天80%的访问集中在20%的时间里，这20%时间叫做峰值时间
公式：( 总PV数 * 80% ) / ( 每天秒数 * 20% ) = 峰值时间每秒请求数(QPS)
```QPS =总PV数/21600  ```

#### 事务
 就是用户某一步或几步操作的集合。不过，我们要保证它有一个完整意义。比如用户对某一个页面的一次请求，用户对某系统的一次登录，淘宝用户对商品的一次确认支付过程。这些我们都可以看作一个事务。那么如何衡量服务器对事务的处理能力。

## 工具/框架
LoadRunner,Jmeter,Gatling,Tsung,Grinder,apache AB,webbench,erlang包,golang包,Seige


## 业务性能指标:

* 并发用户数
* 事务吞吐率（TPS/RPS）
* 事务平均响应时间
* 事务成功率

## 系统资源性能指标:
* 服务器：CPU利用率、处理器队列长度、内存利用率、内存交换页面数、磁盘IO状态、网卡带宽使用情况等；
* 数据库：数据库连接数、数据库读写响应时长、数据库读写吞吐量等；
* 网络：网络吞吐量、网络带宽、网络缓冲池大小；
* 缓存（Redis）：静态资源缓存命中率、动态数据缓存命中率、缓存吞吐量等；
* 测试设备（压力发生器）：CPU利用率、处理器队列长度、内存利用率、内存交换页面数、磁盘IO状态、网卡带宽使用情况等。
