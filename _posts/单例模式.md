---
title: 单例模式
date: 2017-08-05 13:08:22
categories: 
- 设计模式
---

## 单例模式
确保一个类只有一个实例，并提供一个全局访问点。

<!--more-->
## 代码
懒汉式
```java
public class Singleton1 {
    private static Singleton1 instance = null;

    private Singleton1() {
    }

    public static Singleton1 getInstance() {
        if (null == instance) {
            instance = new Singleton1();
        }
        return instance;
    }
}

```

饿汉式
```java
public class Singleton2 {
    private static Singleton2 instance = new Singleton2();

    private Singleton2() {
    }

    public static Singleton2 getInstance() {
        return instance;
    }
}
```

```java
/**
 * 解决了Singleton1多线程问题
 * 存在性能问题，因为只有第一次getInstance才需要同步锁，后面的调用同步锁降低了性能
 *
 */
public class Singleton3 {
    private static Singleton3 instance = null;

    private Singleton3() {
    }

    public static synchronized Singleton3 getInstance() {
        if (null == instance) {
            instance = new Singleton3();
        }
        return instance;
    }
}

```

```java
/**
 * 解决了Singleton3性能问题
 */
public class Singleton4 {
    private volatile static Singleton4 instance = null;

    private Singleton4() {
    }

    public static Singleton4 getInstance() {
        if (null == instance) {
            synchronized (Singleton4.class) {
                if (null == instance) {
                    instance = new Singleton4();
                }
            }
        }
        return instance;
    }
}

```