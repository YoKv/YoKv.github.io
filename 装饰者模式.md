---
title: 装饰者模式
date: 2017-07-28 13:54:51
categories:
- 设计模式
---

## 装饰者模式
本文为Head First设计模式第三章阅读笔记。装饰者模式允许类容易扩展，在不修改现有代码的情况下，就可以搭配新的行为，这样的而设计具有弹性，可以应对变化。
<!--more-->
*设计原则：*类应该对拓展开放，对修改关闭。

## 代码
```java
/**
 * 饮料抽象类
 * Created by tang on 2017/7/26.
 */
public abstract class Beverage {
    protected String description = "unknown";

    public abstract double cost();

    public String getDescription() {
        return description;
    }
}
```


```java
/**
 * 调料抽象类,装饰者类
 * Created by tang on 2017/7/26.
 */
public abstract class CondimentDecorator extends Beverage{
    public abstract String getDescription();
}

```


```java

/**
 * 调料类 摩卡
 * Created by tang on 2017/7/26.
 */
public class Mocha extends CondimentDecorator {
    Beverage beverage;

    public Mocha(Beverage beverage) {
        this.beverage = beverage;
    }

    @Override
    public String getDescription() {
        return beverage.getDescription() + ",Mocha 0.20 ";
    }

    @Override
    public double cost() {
        return 0.20 + beverage.cost();
    }
}
```


```java
/**
 * 调料类 Soy
 * Created by tang on 2017/7/26.
 */
public class Soy extends CondimentDecorator {
    Beverage beverage;

    public Soy(Beverage beverage) {
        this.beverage = beverage;
    }

    @Override
    public String getDescription() {
        return beverage.getDescription() + ",Soy 0.10 ";
    }

    @Override
    public double cost() {
        return 0.10 + beverage.cost();
    }
}
```



```java
/**
 * 调料类 Whip
 * Created by tang on 2017/7/26.
 */
public class Whip extends CondimentDecorator {
    Beverage beverage;

    public Whip(Beverage beverage) {
        this.beverage = beverage;
    }

    @Override
    public String getDescription() {
        return beverage.getDescription() + ",Whip 0.15 ";
    }

    @Override
    public double cost() {
        return 0.15 + beverage.cost();
    }
}

```



```java
public class DarkRoast extends Beverage {
    public DarkRoast() {
        description = "DarkRoast 0.99 ";
    }

    @Override
    public double cost() {
        return 0.99;
    }
}
```


```java
public class Decaf extends Beverage {
    public Decaf() {
        description = "Decaf 1.05 ";
    }

    @Override
    public double cost() {
        return 1.05;
    }
}
```


```java
public class Espresso extends Beverage {
    public Espresso() {
        description = "Espresso 1.99 ";
    }

    @Override
    public double cost() {
        return 1.99;
    }
}
```


```java
public class HouseBlend extends Beverage {
    public HouseBlend() {
        description = "HouseBlend 0.89 ";
    }

    @Override
    public double cost() {
        return 0.89;
    }
}
```

```java
    @Test
    public void testt() {
        Beverage beverage = new Espresso();
        System.out.println(beverage.getDescription() + ",$" + beverage.cost());

        Beverage beverage2 = new DarkRoast();
        beverage2 = new Mocha(beverage2);
        beverage2 = new Mocha(beverage2);
        beverage2 = new Soy(beverage2);
        System.out.println(beverage2.getDescription() + ",$" + beverage2.cost());

        Beverage beverage3 = new Decaf();
        beverage3 = new Whip(beverage3);
        beverage3 = new Mocha(beverage3);
        beverage3 = new Soy(beverage3);
        System.out.println(beverage3.getDescription() + ",$" + beverage3.cost());
    }

```

## 定义
动态地将责任附加到对象上。想要拓展功能，装饰者提供有别于继承的另一种选择。

## 代码地址
[代码地址](https://coding.net/u/YoKv/p/readingNotes/git/tree/master/design-patterns/src/main/java/space/aiyo/decoratorPattern)  
